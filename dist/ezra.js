/*! Ezra - Linkifiy Chinese Bible Reference <https://kenhung.github.io/Ezra/>
    Copyright (C) 2016  Ken Hung

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.
 */
!function(){var t={},e={res:{},setLang:function(t){var e=this.res[t];for(var o in e)this[o]=e[o]},getLocalAbbr:function(t){return this.localAbbr[t]||t},refText:function(t){return"("+this.getLocalAbbr(t.abbr)+" "+t.refsStr+")"}};function o(t,o){e.res[t]=o}o("zh-Hant",{loading:"\u8f09\u5165\u4e2d",connectFail:"\u7121\u6cd5\u9023\u4e0a\u4f3a\u670d\u5668\u3002",verseNotFound:"\u672a\u80fd\u67e5\u8a3d\u7d93\u6587\u3002",refInvalid:"\u627e\u4e0d\u5230\u8a18\u9304\uff01\u8056\u7d93\u4e2d\u6c92\u6709\u9019\u7ae0\u7bc0\u3002",localAbbr:{},fhl:{gb:0}}),o("zh-Hans",{loading:"\u8f7d\u5165\u4e2d",connectFail:"\u65e0\u6cd5\u8fde\u4e0a\u4f3a\u670d\u5668\u3002 ",verseNotFound:"\u672a\u80fd\u67e5\u8a3d\u7ecf\u6587\u3002",refInvalid:"\u627e\u4e0d\u5230\u8bb0\u5f55\uff01\u5723\u7ecf\u4e2d\u6ca1\u6709\u8fd9\u7ae0\u8282\u3002",localAbbr:{"\u5275":"\u521b","\u66f8":"\u4e66","\u8a69":"\u8bd7","\u50b3":"\u4f20","\u8cfd":"\u8d5b","\u7d50":"\u7ed3","\u5f4c":"\u5f25","\u9d3b":"\u9e3f","\u8a72":"\u8be5","\u4e9e":"\u4e9a","\u746a":"\u739b","\u7d04":"\u7ea6","\u7f85":"\u7f57","\u6797\u5f8c":"\u6797\u540e","\u5e16\u5f8c":"\u5e16\u540e","\u63d0\u5f8c":"\u63d0\u540e","\u9580":"\u95e8","\u4f86":"\u6765","\u5f7c\u5f8c":"\u5f7c\u540e","\u7d04\u4e00":"\u7ea6\u4e00","\u7d04\u4e8c":"\u7ea6\u4e8c","\u7d04\u4e09":"\u7ea6\u4e09","\u7336":"\u72b9","\u555f":"\u542f"},fhl:{gb:1}}),e.setLang("zh-Hant"),t=e;var n=new function(){var e={};function o(t,e,o){var n=new XMLHttpRequest,r="https://bible.fhl.net/json/qb.php?chineses="+t.chineses+"&chap="+t.chap+"&sec="+t.sec+"&gb="+t.gb;n.open("GET",r,!0),n.onload=function(){if(200===n.status)try{var t=JSON.parse(n.responseText);if(0===t.record.length)return void o(i.refInvalid);var r=function(t){for(var e="",o=0,n=0;n<t.length;n++){var i=t[n];n>0&&i.sec>o+1&&(e+="\u22ef\u22ef"),o=i.sec,e+=i.bible_text}return e}(t.record);e(t.record[0].chap,r)}catch(s){o(i.verseNotFound,s)}else o(i.verseNotFound,"XHR status = "+n.status)},n.onerror=function(){o(i.connectFail)},n.send()}this.getVerses=function(n,i){var r=t.fhl.gb+t.refText(n);if(Object.hasOwnProperty.call(e,r))i({data:e[r]+t.refText(n)});else{var s=[],a=function(o,a){s.push({chap:o,text:a}),s.length==Object.keys(n.refs).length&&(s.sort((function(t,e){return t.chap-e.chap})),e[r]=s.map((function(t){return t.text})).join(""),i({data:e[r]+t.refText(n)}))},h=function(t,e){i({errCode:t,errMsg:e})};for(var l in n.refs){o({chineses:t.getLocalAbbr(n.abbr),chap:l,sec:n.refs[l],gb:t.fhl.gb},a,h)}}}},i=Object.freeze({connectFail:"connectFail",verseNotFound:"verseNotFound",refInvalid:"refInvalid"}),r={"\u5275":["\u5275\u4e16\u8a18","\u5275","\u521b\u4e16\u8bb0","\u521b"],"\u51fa":["\u51fa\u57c3\u53ca\u8a18","\u51fa","\u51fa\u57c3\u53ca\u8bb0"],"\u5229":["\u5229\u672a\u8a18","\u5229","\u5229\u672a\u8bb0"],"\u6c11":["\u6c11\u6578\u8a18","\u6c11","\u6c11\u6570\u8bb0"],"\u7533":["\u7533\u547d\u8a18","\u7533","\u7533\u547d\u8bb0"],"\u66f8":["\u7d04\u66f8\u4e9e\u8a18","\u66f8","\u7ea6\u4e66\u4e9a\u8bb0","\u4e66"],"\u58eb":["\u58eb\u5e2b\u8a18","\u58eb","\u58eb\u5e08\u8bb0"],"\u5f97":["\u8def\u5f97\u8a18","\u5f97","\u8def\u5f97\u8bb0"],"\u6492\u4e0a":["\u6492\u6bcd\u8033\u8a18\u4e0a","\u6492\u4e0a","\u6492\u6bcd\u8033\u8bb0\u4e0a"],"\u6492\u4e0b":["\u6492\u6bcd\u8033\u8a18\u4e0b","\u6492\u4e0b","\u6492\u6bcd\u8033\u8bb0\u4e0b"],"\u738b\u4e0a":["\u5217\u738b\u7d00\u4e0a","\u738b\u4e0a","\u5217\u738b\u7eaa\u4e0a"],"\u738b\u4e0b":["\u5217\u738b\u7d00\u4e0b","\u738b\u4e0b","\u5217\u738b\u7eaa\u4e0b"],"\u4ee3\u4e0a":["\u6b77\u4ee3\u5fd7\u4e0a","\u4ee3\u4e0a","\u5386\u4ee3\u5fd7\u4e0a"],"\u4ee3\u4e0b":["\u6b77\u4ee3\u5fd7\u4e0b","\u4ee3\u4e0b","\u5386\u4ee3\u5fd7\u4e0b"],"\u62c9":["\u4ee5\u65af\u62c9\u8a18","\u62c9","\u4ee5\u65af\u62c9\u8bb0"],"\u5c3c":["\u5c3c\u5e0c\u7c73\u8a18","\u5c3c","\u5c3c\u5e0c\u7c73\u8bb0"],"\u65af":["\u4ee5\u65af\u5e16\u8a18","\u65af","\u4ee5\u65af\u5e16\u8bb0"],"\u4f2f":["\u7d04\u4f2f\u8a18","\u4f2f","\u7ea6\u4f2f\u8bb0"],"\u8a69":["\u8a69\u7bc7","\u8a69","\u8bd7\u7bc7","\u8bd7"],"\u7bb4":["\u7bb4\u8a00","\u7bb4"],"\u50b3":["\u50b3\u9053\u66f8","\u50b3","\u4f20\u9053\u4e66","\u4f20"],"\u6b4c":["\u96c5\u6b4c","\u6b4c"],"\u8cfd":["\u4ee5\u8cfd\u4e9e\u66f8","\u8cfd","\u4ee5\u8d5b\u4e9a\u4e66","\u8d5b"],"\u8036":["\u8036\u5229\u7c73\u66f8","\u8036","\u8036\u5229\u7c73\u4e66"],"\u54c0":["\u8036\u5229\u7c73\u54c0\u6b4c","\u54c0"],"\u7d50":["\u4ee5\u897f\u7d50\u66f8","\u7d50","\u4ee5\u897f\u7ed3\u4e66","\u7ed3"],"\u4f46":["\u4f46\u4ee5\u7406\u66f8","\u4f46","\u4f46\u4ee5\u7406\u4e66"],"\u4f55":["\u4f55\u897f\u963f\u66f8","\u4f55","\u4f55\u897f\u963f\u4e66"],"\u73e5":["\u7d04\u73e5\u66f8","\u73e5","\u7ea6\u73e5\u4e66"],"\u6469":["\u963f\u6469\u53f8\u66f8","\u6469","\u963f\u6469\u53f8\u4e66"],"\u4fc4":["\u4fc4\u5df4\u5e95\u4e9e\u66f8","\u4fc4","\u4fc4\u5df4\u5e95\u4e9a\u4e66"],"\u62ff":["\u7d04\u62ff\u66f8","\u62ff","\u7ea6\u62ff\u4e66"],"\u5f4c":["\u5f4c\u8fe6\u66f8","\u5f4c","\u5f25\u8fe6\u4e66","\u5f25"],"\u9d3b":["\u90a3\u9d3b\u66f8","\u9d3b","\u90a3\u9e3f\u4e66","\u9e3f"],"\u54c8":["\u54c8\u5df4\u8c37\u66f8","\u54c8","\u54c8\u5df4\u8c37\u4e66"],"\u756a":["\u897f\u756a\u96c5\u66f8","\u756a","\u897f\u756a\u96c5\u4e66"],"\u8a72":["\u54c8\u8a72\u66f8","\u8a72","\u54c8\u8be5\u4e66","\u8be5"],"\u4e9e":["\u6492\u8fe6\u5229\u4e9e\u66f8","\u4e9e","\u6492\u8fe6\u5229\u4e9a\u4e66","\u4e9a"],"\u746a":["\u746a\u62c9\u57fa\u66f8","\u746a","\u739b\u62c9\u57fa\u4e66","\u739b"],"\u592a":["\u99ac\u592a\u798f\u97f3","\u592a","\u9a6c\u592a\u798f\u97f3"],"\u53ef":["\u99ac\u53ef\u798f\u97f3","\u53ef","\u9a6c\u53ef\u798f\u97f3"],"\u8def":["\u8def\u52a0\u798f\u97f3","\u8def"],"\u7d04":["\u7d04\u7ff0\u798f\u97f3","\u7d04","\u7ea6\u7ff0\u798f\u97f3","\u7ea6"],"\u5f92":["\u4f7f\u5f92\u884c\u50b3","\u5f92","\u4f7f\u5f92\u884c\u4f20"],"\u7f85":["\u7f85\u99ac\u66f8","\u7f85","\u7f57\u9a6c\u4e66","\u7f57"],"\u6797\u524d":["\u54e5\u6797\u591a\u524d\u66f8","\u6b4c\u6797\u591a\u524d\u66f8","\u6797\u524d","\u54e5\u524d","\u6b4c\u524d","\u54e5\u6797\u591a\u524d\u4e66"],"\u6797\u5f8c":["\u54e5\u6797\u591a\u5f8c\u66f8","\u6b4c\u6797\u591a\u5f8c\u66f8","\u6797\u5f8c","\u54e5\u5f8c","\u6b4c\u5f8c","\u54e5\u6797\u591a\u540e\u4e66","\u6b4c\u6797\u591a\u540e\u4e66","\u6797\u540e","\u54e5\u540e","\u6b4c\u540e"],"\u52a0":["\u52a0\u62c9\u592a\u66f8","\u52a0","\u52a0\u62c9\u592a\u4e66"],"\u5f17":["\u4ee5\u5f17\u6240\u66f8","\u5f17","\u4ee5\u5f17\u6240\u4e66"],"\u8153":["\u8153\u7acb\u6bd4\u66f8","\u8153","\u8153\u7acb\u6bd4\u4e66"],"\u897f":["\u6b4c\u7f85\u897f\u66f8","\u897f","\u6b4c\u7f57\u897f\u4e66"],"\u5e16\u524d":["\u5e16\u6492\u7f85\u5c3c\u8fe6\u524d\u66f8","\u5e16\u524d","\u5e16\u6492\u7f57\u5c3c\u8fe6\u524d\u4e66"],"\u5e16\u5f8c":["\u5e16\u6492\u7f85\u5c3c\u8fe6\u5f8c\u66f8","\u5e16\u5f8c","\u5e16\u6492\u7f57\u5c3c\u8fe6\u540e\u4e66","\u5e16\u540e"],"\u63d0\u524d":["\u63d0\u6469\u592a\u524d\u66f8","\u63d0\u524d","\u63d0\u6469\u592a\u524d\u4e66"],"\u63d0\u5f8c":["\u63d0\u6469\u592a\u5f8c\u66f8","\u63d0\u5f8c","\u63d0\u6469\u592a\u540e\u4e66","\u63d0\u540e"],"\u591a":["\u63d0\u591a\u66f8","\u591a","\u63d0\u591a\u4e66"],"\u9580":["\u8153\u5229\u9580\u66f8","\u9580","\u8153\u5229\u95e8\u4e66","\u95e8"],"\u4f86":["\u5e0c\u4f2f\u4f86\u66f8","\u4f86","\u5e0c","\u5e0c\u4f2f\u6765\u4e66","\u6765"],"\u96c5":["\u96c5\u5404\u66f8","\u96c5","\u96c5\u5404\u4e66"],"\u5f7c\u524d":["\u5f7c\u5f97\u524d\u66f8","\u5f7c\u524d","\u5f7c\u5f97\u524d\u4e66"],"\u5f7c\u5f8c":["\u5f7c\u5f97\u5f8c\u66f8","\u5f7c\u5f8c","\u5f7c\u5f97\u540e\u4e66","\u5f7c\u540e"],"\u7d04\u4e00":["\u7d04\u7ff0\u4e00\u66f8","\u7d04\u7ff0\u58f9\u66f8","\u7d04\u58f9","\u7ea6\u7ff0\u4e00\u4e66","\u7ea6\u7ff0\u58f9\u4e66","\u7ea6\u58f9"],"\u7d04\u4e8c":["\u7d04\u7ff0\u4e8c\u66f8","\u7d04\u7ff0\u8cb3\u66f8","\u7d04\u8cb3","\u7ea6\u7ff0\u4e8c\u4e66","\u7ea6\u7ff0\u8d30\u4e66","\u7ea6\u8d30"],"\u7d04\u4e09":["\u7d04\u7ff0\u4e09\u66f8","\u7d04\u7ff0\u53c1\u66f8","\u7d04\u7ff0\u53c3\u66f8","\u7d04\u53c1","\u7d04\u53c3","\u7ea6\u7ff0\u4e09\u4e66","\u7ea6\u7ff0\u53c1\u4e66","\u7ea6\u7ff0\u53c2\u4e66","\u7ea6\u53c1","\u7ea6\u53c2"],"\u7336":["\u7336\u5927\u66f8","\u7336","\u72b9\u5927\u4e66","\u72b9"],"\u555f":["\u555f\u793a\u9304","\u5553\u793a\u9304","\u555f","\u5553","\u542f\u793a\u5f55","\u542f"]},s={"\u5275":["Genesis","Gen.","Ge.","Gn."],"\u51fa":["Exodus","Ex.","Exod.","Exo."],"\u5229":["Leviticus","Lev.","Le.","Lv."],"\u6c11":["Numbers","Num.","Nu.","Nm.","Nb."],"\u7533":["Deuteronomy","Deut.","De.","Dt."],"\u66f8":["Joshua","Josh.","Jos.","Jsh."],"\u58eb":["Judges","Judg.","Jdg.","Jg.","Jdgs."],"\u5f97":["Ruth","Rth.","Ru."],"\u6492\u4e0a":["1 Samuel","1 Sam.","1 Sm.","1 Sa.","1 S.","I Sam.","I Sa.","1Sam.","1Sa.","1S.","1st Samuel","1st Sam.","First Samuel","First Sam."],"\u6492\u4e0b":["2 Samuel","2 Sam.","2 Sm.","2 Sa.","2 S.","II Sam.","II Sa.","2Sam.","2Sa.","2S.","2nd Samuel","2nd Sam.","Second Samuel","Second Sam."],"\u738b\u4e0a":["1 Kings","1 Kgs","1 Ki","1Kgs","1Kin","1Ki","1K","I Kgs","I Ki","1st Kings","1st Kgs","First Kings","First Kgs"],"\u738b\u4e0b":["2 Kings","2 Kgs.","2 Ki.","2Kgs.","2Kin.","2Ki.","2K.","II Kgs.","II Ki.","2nd Kings","2nd Kgs.","Second Kings","Second Kgs."],"\u4ee3\u4e0a":["1 Chronicles","1 Chron.","1 Chr.","1 Ch.","1Chron.","1Chr.","1Ch.","I Chron.","I Chr.","I Ch.","1st Chronicles","1st Chron.","First Chronicles","First Chron."],"\u4ee3\u4e0b":["2 Chronicles","2 Chron.","2 Chr.","2 Ch.","2Chron.","2Chr.","2Ch.","II Chron.","II Chr.","II Ch.","2nd Chronicles","2nd Chron.","Second Chronicles","Second Chron."],"\u62c9":["Ezra","Ezr.","Ez."],"\u5c3c":["Nehemiah","Neh.","Ne."],"\u65af":["Esther","Est.","Esth.","Es."],"\u4f2f":["Job","Jb."],"\u8a69":["Psalms","Ps.","Psalm","Pslm.","Psa.","Psm.","Pss."],"\u7bb4":["Proverbs","Prov","Pro.","Prv.","Pr."],"\u50b3":["Ecclesiastes","Eccles.","Eccle.","Ecc.","Ec.","Qoh."],"\u6b4c":["Song of Solomon","Song","Song of Songs","SOS.","So.","Canticle of Canticles","Canticles","Cant."],"\u8cfd":["Isaiah","Isa.","Is."],"\u8036":["Jeremiah","Jer.","Je.","Jr."],"\u54c0":["Lamentations","Lam.","La."],"\u7d50":["Ezekiel","Ezek.","Eze.","Ezk."],"\u4f46":["Daniel","Dan.","Da.","Dn."],"\u4f55":["Hosea","Hos.","Ho."],"\u73e5":["Joel","Jl."],"\u6469":["Amos","Am."],"\u4fc4":["Obadiah","Obad.","Ob."],"\u62ff":["Jonah","Jnh.","Jon."],"\u5f4c":["Micah","Mic.","Mc."],"\u9d3b":["Nahum","Nah.","Na."],"\u54c8":["Habakkuk","Hab.","Hb."],"\u756a":["Zephaniah","Zeph.","Zep.","Zp."],"\u8a72":["Haggai","Hag.","Hg."],"\u4e9e":["Zechariah","Zech.","Zec.","Zc."],"\u746a":["Malachi","Mal.","Ml."],"\u592a":["Matthew","Matt.","Mt."],"\u53ef":["Mark","Mrk.","Mar.","Mk.","Mr."],"\u8def":["Luke","Luk.","Lk."],"\u7d04":["John","Joh.","Jhn.","Jn."],"\u5f92":["Acts","Act","Ac."],"\u7f85":["Romans","Rom.","Ro.","Rm."],"\u6797\u524d":["1 Corinthians","1 Cor.","1 Co.","I Cor.","I Co.","1Cor.","1Co.","I Corinthians","1Corinthians","1st Corinthians","2nd Corinthians"],"\u6797\u5f8c":["2 Corinthians","2 Cor.","2 Co.","II Cor.","II Co.","2Cor.","2Co.","II Corinthians","2Corinthians","2nd Corinthians","Second Corinthians"],"\u52a0":["Galatians","Gal.","Ga."],"\u5f17":["Ephesians","Eph.","Ephes."],"\u8153":["Philippians","Phil.","Php.","Pp."],"\u897f":["Colossians","Col.","Co."],"\u5e16\u524d":["1 Thessalonians","1 Thess.","1 Thes.","1 Th.","I Thessalonians","I Thess.","I Thes.","I Th.","1Thessalonians","1Thess.","1Thes.","1Th.","1st Thessalonians","1st Thess.","First Thessalonians","First Thess."],"\u5e16\u5f8c":["2 Thessalonians","2 Thess.","2 Thes.","II Thessalonians","II Thess.","II Thes.","II Th.","2Thessalonians","2Thess.","2Thes.","2Th.","2nd Thessalonians","2nd Thess.","Second Thessalonians","Second Thess."],"\u63d0\u524d":["1 Timothy","1 Tim.","1 Ti.","I Timothy","I Tim.","I Ti.","1Timothy","1Tim.","1Ti.","1st Timothy","1st Tim.","First Timothy","First Tim."],"\u63d0\u5f8c":["2 Timothy","2 Tim.","2 Ti.","II Timothy","II Tim.","II Ti.","2Timothy","2Tim.","2Ti.","2nd Timothy","2nd Tim.","Second Timothy","Second Tim."],"\u591a":["Titus","Tit.","ti."],"\u9580":["Philemon","Philem.","Phm.","Pm."],"\u4f86":["Hebrews","Heb."],"\u96c5":["James","Jas.","Jm."],"\u5f7c\u524d":["1 Peter","1 Pet.","1 Pe.","1 Pt.","1 P.","I Pet.","I Pt.","I Pe.","1Peter","1Pet.","1Pe.","1Pt.","1P.","I Peter","1st Peter","First Peter"],"\u5f7c\u5f8c":["2 Peter","2 Pet.","2 Pe.","2 Pt.","2 P.","II Peter","II Pet.","II Pt.","II Pe.","2Peter","2Pet.","2Pe.","2Pt.","2P.","2nd Peter","Second Peter"],"\u7d04\u4e00":["1 John","1 Jhn.","1 Jn.","1 J.","1John","1Jhn.","1Joh.","1Jn.","1Jo.","1J.","I John","I Jhn.","I Joh.","I Jn.","I Jo.","1st John","First John"],"\u7d04\u4e8c":["2 John","2 Jhn.","2 Jn.","2 J.","2John","2Jhn.","2Joh.","2Jn.","2Jo.","2J.","II John","II Jhn.","II Joh.","II Jn.","II Jo.","2nd John","Second John"],"\u7d04\u4e09":["3 John","3 Jhn.","3 Jn.","3 J.","3John","3Jhn.","3Joh.","3Jn.","3Jo.","3J.","III John","III Jhn.","III Joh.","III Jn.","III Jo.","3rd John","Third John"],"\u7336":["Jude","Jud.","Jd."],"\u555f":["Revelation","Rev.","Re.","The Revelation"]},a={},h={"\u25cb":0,"\u96f6":0,"\u4e00":1,"\u4e8c":2,"\u4e09":3,"\u56db":4,"\u4e94":5,"\u516d":6,"\u4e03":7,"\u516b":8,"\u4e5d":9},l={"\u5341":10,"\u5eff":20,"\u5345":30,"\u534c":40,"\u767e":100},f=Object.keys(h),c=Object.keys(l);function u(t){return!!l[t]}for(var d in a.supportedChars=f.concat(c).join(""),a.parse=function(t){if(isNaN(t)){if(function(t){for(var e=0;e<t.length;e++)if(l[t[e]])return!0;return!1}(t)){for(var e=[],o=0;o<t.length;o++){var n=t[o];u(n)?(0===e.length&&e.push(1),e[e.length-1]*=l[n]):e.push(h[n]||0)}return function(t){for(var e=0,o=0;o<t.length;o++)e+=t[o];return e}(e)}var i=t.split("").map((function(t){return h[t]})).join("");return parseInt(i,10)}return+t},r)if(Object.hasOwnProperty.call(r,d)){var p=s[d].map((function(t){return t.replace(".","\\.?")}));r[d]=r[d].concat(p)}var g=function(t){return"("+t.map((function(t){return r[t].join("|")})).join("|")+")"},v="(\u7b2c?["+a.supportedChars+"]+[:\uff1a\ufe30\u7bc7\u7ae0]?|\\d+[:\uff1a\ufe30\u7bc7\u7ae0])",m="\u7b2c?([\\s\\d,\uff0c\u3001\u548c\u53ca\\-\u2500\u2013\uff0d\u2014~\uff5e\u301c\u81f3;\uff1b\u7bc0\u8282]*\\d)[\u7bc0\u8282]?(?!\\s?[:\uff1a\ufe30\u7bc7\u7ae0])",b={standard:new RegExp(g(Object.keys(r))+"?\\s?"+v+m,"g"),multiChap:new RegExp(g(Object.keys(r))+"\\s?"+v+m+"[\\-\u2500\u2013\uff0d\u2014~\uff5e\u301c\u81f3]"+v+m,"g"),skipChap:new RegExp(g(["\u4fc4","\u9580","\u7336","\u7d04\u4e8c","\u7d04\u4e09"])+"\\s?"+m,"g")};function y(t,e,o,n,i,s,h){if(this.text=t,this.pos=e,this.abbr=function(t){for(var e in r)if(r[e].indexOf(t)>=0)return e;for(e in r)if(t.search(g([e]))>=0)return e}(o),n=f(n),i=c(i),this.refs={},s&&h){s=f(s),h=c(h),this.refs[n]=i+"-200";for(var l=n+1;l<s;l++)this.refs[l]="1-200";this.refs[s]="1-"+h,this.refsStr=n+":"+i+"-"+s+":"+h}else this.refs[n]=i,this.refsStr=n+":"+i;function f(t){return a.parse(t.replace(new RegExp("[:\uff1a\ufe30\u7bc7\u7ae0]","g"),""))}function c(t){return t.replace(new RegExp("[\\-\u2500\u2013\uff0d\u2014~\uff5e\u301c\u81f3]","g"),"-").replace(new RegExp("[,\uff0c\u3001\u548c\u53ca]","g"),",").replace(/[\u7bc0\u8282\s]/g,"")}}var C,w=function(t){for(var e,o=[],n="";null!==(e=b.multiChap.exec(t));)o.push(new y(e[0],e.index,e[1],e[2],e[3],e[4],e[5]));for(;null!==(e=b.standard.exec(t));){var i=e[1]||n,r=o.every((function(t){return e.index<t.pos||e.index>=t.pos+t.text.length}));i&&r&&o.push(new y(e[0],e.index,i,e[2],e[3])),n=i}for(;null!==(e=b.skipChap.exec(t));)o.push(new y(e[0],e.index,e[1],"1",e[2]));return o.sort((function(t,e){return t.pos-e.pos}))},T={};C=function(){"use strict";var t=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=void 0;void 0===o&&(o={modules:[]});var n=null;function i(t){var e=t.getBoundingClientRect(),o={};for(var n in e)o[n]=e[n];try{if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=i(r);o.top+=s.top,o.bottom+=s.top,o.left+=s.left,o.right+=s.left}}}catch(a){}return o}function r(t){var e=(getComputedStyle(t)||{}).position,o=[];if("fixed"===e)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var i=void 0;try{i=getComputedStyle(n)}catch(l){}if(null==i)return o.push(n),o;var r=i,s=r.overflow,a=r.overflowX,h=r.overflowY;/(auto|scroll|overlay)/.test(s+h+a)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(i.position)>=0)&&o.push(n)}return o.push(t.ownerDocument.body),t.ownerDocument!==document&&o.push(t.ownerDocument.defaultView),o}var s,a=(s=0,function(){return++s}),h={};function l(){n&&document.body.removeChild(n),n=null}function f(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,r=i(t),s=function(){var t=n;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",a()),p(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),n=t);var e=t.getAttribute("data-tether-id");return void 0===h[e]&&(h[e]=i(t),T((function(){delete h[e]}))),h[e]}();return r.top-=s.top,r.left-=s.left,void 0===r.width&&(r.width=document.body.scrollWidth-r.left-r.right),void 0===r.height&&(r.height=document.body.scrollHeight-r.top-r.bottom),r.top=r.top-o.clientTop,r.left=r.left-o.clientLeft,r.right=e.body.clientWidth-r.width-r.left,r.bottom=e.body.clientHeight-r.height-r.top,r}function c(t){return t.offsetParent||document.documentElement}var u=null;function d(){if(u)return u;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");p(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;o===n&&(n=e.clientWidth),document.body.removeChild(e);var i=o-n;return u={width:i,height:i}}function p(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach((function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])})),t}function g(t,e){if(void 0!==t.classList)e.split(" ").forEach((function(e){e.trim()&&t.classList.remove(e)}));else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=b(t).replace(o," ");y(t,n)}}function v(t,e){if(void 0!==t.classList)e.split(" ").forEach((function(e){e.trim()&&t.classList.add(e)}));else{g(t,e);var o=b(t)+" "+e;y(t,o)}}function m(t,e){if(void 0!==t.classList)return t.classList.contains(e);var o=b(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function b(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function y(t,e){t.setAttribute("class",e)}function C(t,e,o){o.forEach((function(o){-1===e.indexOf(o)&&m(t,o)&&g(t,o)})),e.forEach((function(e){m(t,e)||v(t,e)}))}var w=[],T=function(t){w.push(t)},E=function(){for(var t=void 0;t=w.pop();)t()},O=function(){function o(){e(this,o)}return t(o,[{key:"on",value:function(t,e,o){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:n})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,n=Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,h=r.once,l=a;void 0===l&&(l=this),s.apply(l,n),h?this.bindings[t].splice(e,1):++e}}}}]),o}();o.Utils={getActualBoundingClientRect:i,getScrollParents:r,getBounds:f,getOffsetParent:c,extend:p,addClass:v,removeClass:g,hasClass:m,updateClasses:C,defer:T,flush:E,uniqueId:a,Evented:O,getScrollBarSize:d,removeUtilElements:l};var x=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(h){i=!0,r=h}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=(t=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),function(t,e,o){for(var n=!0;n;){var i=t,r=e,s=o;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var h=a.get;if(void 0===h)return;return h.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=r,o=s,n=!0,a=l=void 0}});function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}if(void 0===o)throw new Error("You must include the utils.js file before tether.js");var r=(V=o.Utils).getScrollParents,c=(f=V.getBounds,V.getOffsetParent),v=(p=V.extend,V.addClass),g=V.removeClass,d=(C=V.updateClasses,T=V.defer,E=V.flush,V.getScrollBarSize),l=V.removeUtilElements;function I(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}var S,J,k,A,j=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var n=e[o];if(void 0!==t.style[n])return n}}(),L=[],M=function(){L.forEach((function(t){t.position(!1)})),E()};function N(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():+new Date}S=null,J=null,k=null,A=function t(){if(void 0!==J&&J>16)return J=Math.min(J-16,250),void(k=setTimeout(t,250));void 0!==S&&N()-S<10||(null!=k&&(clearTimeout(k),k=null),S=N(),M(),J=N()-S)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach((function(t){window.addEventListener(t,A)}));var _={center:"center",left:"right",right:"left"},D={middle:"middle",top:"bottom",bottom:"top"},F={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},H=function(t){var e=t.left,o=t.top;return void 0!==F[t.left]&&(e=F[t.left]),void 0!==F[t.top]&&(o=F[t.top]),{left:e,top:o}};function z(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];return o.forEach((function(e){var o=e.top,n=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof n&&(n=parseFloat(n,10)),t.top+=o,t.left+=n})),t}function R(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var W=function(t){var e=t.split(" "),o=x(e,2);return{top:o[0],left:o[1]}},K=W,B=function(n){function i(t){var n=this;e(this,i),P(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.position=this.position.bind(this),L.push(this),this.history=[],this.setOptions(t,!1),o.modules.forEach((function(t){void 0!==t.initialize&&t.initialize.call(n)})),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,O),t(i,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=p({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var n=this.options,i=n.element,s=n.target,a=n.targetModifier;if(this.element=i,this.target=s,this.targetModifier=a,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach((function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),v(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&v(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=K(this.options.targetAttachment),this.attachment=K(this.options.attachment),this.offset=W(this.options.offset),this.targetOffset=W(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),!1!==this.options.enabled&&this.enable(o)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return f(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=f(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=f(e);var o=getComputedStyle(e),n=0;(e.scrollWidth>e.clientWidth||[o.overflow,o.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(n=15);var i=t.height-parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)-n,r={width:15,height:.975*i*(i/e.scrollHeight),left:t.left+t.width-parseFloat(o.borderLeftWidth)-15},s=0;i<408&&this.target===document.body&&(s=-11e-5*Math.pow(i,2)-.00727*i+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24));var a=this.target.scrollTop/(e.scrollHeight-i);return r.top=a*(i-r.height-s)+t.top+parseFloat(o.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&v(this.target,this.getClass("enabled")),v(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach((function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)})),e&&this.position()}},{key:"disable",value:function(){var t=this;g(this.target,this.getClass("enabled")),g(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.position)}))}},{key:"destroy",value:function(){var t=this;this.disable(),L.forEach((function(e,o){e===t&&L.splice(o,1)})),0===L.length&&l()}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment,void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var i=[];["left","top","bottom","right","middle","center"].forEach((function(t){i.push(o.getClass("element-attached")+"-"+t),i.push(o.getClass("target-attached")+"-"+t)})),T((function(){void 0!==o._addAttachClasses&&(C(o.element,o._addAttachClasses,i),!1!==o.options.addTargetClasses&&C(o.target,o._addAttachClasses,i),delete o._addAttachClasses)}))}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=function(t,e){var o=t.left,n=t.top;return"auto"===o&&(o=_[e.left]),"auto"===n&&(n=D[e.top]),{left:o,top:n}}(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",(function(){return f(t.element)})),r=i.width,s=i.height;if(0===r&&0===s&&void 0!==this.lastSize){var a=this.lastSize;r=a.width,s=a.height}else this.lastSize={width:r,height:s};var h=this.cache("target-bounds",(function(){return t.getTargetBounds()})),l=h,u=R(H(this.attachment),{width:r,height:s}),p=R(H(n),l),g=R(this.offset,{width:r,height:s}),v=R(this.targetOffset,l);u=z(u,g),p=z(p,v);for(var m=h.left+p.left-u.left,b=h.top+p.top-u.top,y=0;y<o.modules.length;++y){var C=o.modules[y].position.call(this,{left:m,top:b,targetAttachment:n,targetPos:h,elementPos:i,offset:u,targetOffset:p,manualOffset:g,manualTargetOffset:v,scrollbarSize:x,attachment:this.attachment});if(!1===C)return!1;void 0!==C&&"object"==typeof C&&(b=C.top,m=C.left)}var w={page:{top:b,left:m},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-s+innerHeight,left:m-pageXOffset,right:pageXOffset-m-r+innerWidth}},T=this.target.ownerDocument,O=T.defaultView,x=void 0;return O.innerHeight>T.documentElement.clientHeight&&(x=this.cache("scrollbar-size",d),w.viewport.bottom-=x.height),O.innerWidth>T.documentElement.clientWidth&&(x=this.cache("scrollbar-size",d),w.viewport.right-=x.width),-1!==["","static"].indexOf(T.body.style.position)&&-1!==["","static"].indexOf(T.body.parentElement.style.position)||(w.page.bottom=T.body.scrollHeight-b-s,w.page.right=T.body.scrollWidth-m-r),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",(function(){return c(t.target)})),o=t.cache("target-offsetparent-bounds",(function(){return f(e)})),n=getComputedStyle(e),i=o,r={};if(["Top","Left","Bottom","Right"].forEach((function(t){r[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])})),o.right=T.body.scrollWidth-o.left-i.width+r.right,o.bottom=T.body.scrollHeight-o.top-i.height+r.bottom,w.page.top>=o.top+r.top&&w.page.bottom>=o.bottom&&w.page.left>=o.left+r.left&&w.page.right>=o.right){var s=e.scrollTop,a=e.scrollLeft;w.offset={top:w.page.top-o.top+s-r.top,left:w.page.left-o.left+a-r.left}}}(),this.move(w),this.history.unshift(w),this.history.length>3&&this.history.pop(),e&&E(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var o={};for(var n in t)for(var i in o[n]={},t[n]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if(void 0!==a[n]&&!I(a[n][i],t[n][i])){r=!0;break}}r||(o[n][i]=!0)}var h,l,f={top:"",left:"",right:"",bottom:""},u=function(t,o){if(!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)){var n=void 0,i=void 0;t.top?(f.top=0,n=o.top):(f.bottom=0,n=-o.bottom),t.left?(f.left=0,i=o.left):(f.right=0,i=-o.right),"number"==typeof window.devicePixelRatio&&devicePixelRatio%1==0&&(i=Math.round(i*devicePixelRatio)/devicePixelRatio,n=Math.round(n*devicePixelRatio)/devicePixelRatio),f[j]="translateX("+i+"px) translateY("+n+"px)","msTransform"!==j&&(f[j]+=" translateZ(0)")}else t.top?f.top=o.top+"px":f.bottom=o.bottom+"px",t.left?f.left=o.left+"px":f.right=o.right+"px"},d=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(f.position="absolute",u(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(f.position="fixed",u(o.viewport,t.viewport)):void 0!==o.offset&&o.offset.top&&o.offset.left?function(){f.position="absolute";var n=e.cache("target-offsetparent",(function(){return c(e.target)}));c(e.element)!==n&&T((function(){e.element.parentNode.removeChild(e.element),n.appendChild(e.element)})),u(o.offset,t.offset),d=!0}():(f.position="absolute",u({top:!0,left:!0},t.page)),!d)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var g=!0,v=this.element.parentNode;v&&1===v.nodeType&&"BODY"!==v.tagName&&(void 0,((l=(h=v).ownerDocument).fullscreenElement||l.webkitFullscreenElement||l.mozFullScreenElement||l.msFullscreenElement)!==h);){if("static"!==getComputedStyle(v).position){g=!1;break}v=v.parentNode}g||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var m={},b=!1;for(var i in f){var y=f[i];this.element.style[i]!==y&&(b=!0,m[i]=y)}b&&T((function(){p(e.element.style,m),e.trigger("repositioned")}))}}}]),i}();B.modules=[],o.position=M;var Y=p(B,o),p=(x=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(h){i=!0,r=h}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=(V=o.Utils).getBounds,V.extend),X=(C=V.updateClasses,T=V.defer,["left","top","right","bottom"]);o.modules.push({position:function(t){var e=this,o=t.top,n=t.left,i=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",(function(){return f(e.element)})),s=r.height,a=r.width;if(0===a&&0===s&&void 0!==this.lastSize){var h=this.lastSize;a=h.width,s=h.height}var l=this.cache("target-bounds",(function(){return e.getTargetBounds()})),c=l.height,u=l.width,d=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach((function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&d.push(e),o&&d.push(o)})),d.forEach((function(t){["left","top","right","bottom"].forEach((function(e){d.push(t+"-"+e)}))}));var g=[],v=p({},i),m=p({},this.attachment);return this.options.constraints.forEach((function(t){var r=t.to,h=t.attachment,l=t.pin;void 0===h&&(h="");var d=void 0,p=void 0;if(h.indexOf(" ")>=0){var b=h.split(" "),y=x(b,2);p=y[0],d=y[1]}else d=p=h;var C=function(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&function(){var t=e,o=f(e),n=o,i=getComputedStyle(e);if(e=[n.left,n.top,o.width+n.left,o.height+n.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}X.forEach((function(t,o){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[o]+=parseFloat(i["border"+t+"Width"]):e[o]-=parseFloat(i["border"+t+"Width"])}))}(),e}(e,r);"target"!==p&&"both"!==p||(o<C[1]&&"top"===v.top&&(o+=c,v.top="bottom"),o+s>C[3]&&"bottom"===v.top&&(o-=c,v.top="top")),"together"===p&&("top"===v.top&&("bottom"===m.top&&o<C[1]?(o+=c,v.top="bottom",o+=s,m.top="top"):"top"===m.top&&o+s>C[3]&&o-(s-c)>=C[1]&&(o-=s-c,v.top="bottom",m.top="bottom")),"bottom"===v.top&&("top"===m.top&&o+s>C[3]?(o-=c,v.top="top",o-=s,m.top="bottom"):"bottom"===m.top&&o<C[1]&&o+(2*s-c)<=C[3]&&(o+=s-c,v.top="top",m.top="top")),"middle"===v.top&&(o+s>C[3]&&"top"===m.top?(o-=s,m.top="bottom"):o<C[1]&&"bottom"===m.top&&(o+=s,m.top="top"))),"target"!==d&&"both"!==d||(n<C[0]&&"left"===v.left&&(n+=u,v.left="right"),n+a>C[2]&&"right"===v.left&&(n-=u,v.left="left")),"together"===d&&(n<C[0]&&"left"===v.left?"right"===m.left?(n+=u,v.left="right",n+=a,m.left="left"):"left"===m.left&&(n+=u,v.left="right",n-=a,m.left="right"):n+a>C[2]&&"right"===v.left?"left"===m.left?(n-=u,v.left="left",n-=a,m.left="right"):"right"===m.left&&(n-=u,v.left="left",n+=a,m.left="left"):"center"===v.left&&(n+a>C[2]&&"left"===m.left?(n-=a,m.left="right"):n<C[0]&&"right"===m.left&&(n+=a,m.left="left"))),"element"!==p&&"both"!==p||(o<C[1]&&"bottom"===m.top&&(o+=s,m.top="top"),o+s>C[3]&&"top"===m.top&&(o-=s,m.top="bottom")),"element"!==d&&"both"!==d||(n<C[0]&&("right"===m.left?(n+=a,m.left="left"):"center"===m.left&&(n+=a/2,m.left="left")),n+a>C[2]&&("left"===m.left?(n-=a,m.left="right"):"center"===m.left&&(n-=a/2,m.left="right"))),"string"==typeof l?l=l.split(",").map((function(t){return t.trim()})):!0===l&&(l=["top","left","right","bottom"]),l=l||[];var w,T,E=[],O=[];o<C[1]&&(l.indexOf("top")>=0?(o=C[1],E.push("top")):O.push("top")),o+s>C[3]&&(l.indexOf("bottom")>=0?(o=C[3]-s,E.push("bottom")):O.push("bottom")),n<C[0]&&(l.indexOf("left")>=0?(n=C[0],E.push("left")):O.push("left")),n+a>C[2]&&(l.indexOf("right")>=0?(n=C[2]-a,E.push("right")):O.push("right")),E.length&&(void 0,w=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(w),E.forEach((function(t){g.push(w+"-"+t)}))),O.length&&(void 0,T=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(T),O.forEach((function(t){g.push(T+"-"+t)}))),(E.indexOf("left")>=0||E.indexOf("right")>=0)&&(m.left=v.left=!1),(E.indexOf("top")>=0||E.indexOf("bottom")>=0)&&(m.top=v.top=!1),v.top===i.top&&v.left===i.left&&m.top===e.attachment.top&&m.left===e.attachment.left||(e.updateAttachClasses(m,v),e.trigger("update",{attachment:m,targetAttachment:v}))})),T((function(){!1!==e.options.addTargetClasses&&C(e.target,g,d),C(e.element,g,d)})),{top:o,left:n}}});var V,f=(V=o.Utils).getBounds,C=V.updateClasses;return T=V.defer,o.modules.push({position:function(t){var e=this,o=t.top,n=t.left,i=this.cache("element-bounds",(function(){return f(e.element)})),r=i.height,s=i.width,a=this.getTargetBounds(),h=o+r,l=n+s,c=[];o<=a.bottom&&h>=a.top&&["left","right"].forEach((function(t){var e=a[t];e!==n&&e!==l||c.push(t)})),n<=a.right&&l>=a.left&&["top","bottom"].forEach((function(t){var e=a[t];e!==o&&e!==h||c.push(t)}));var u=[],d=[];return u.push(this.getClass("abutted")),["left","top","right","bottom"].forEach((function(t){u.push(e.getClass("abutted")+"-"+t)})),c.length&&d.push(this.getClass("abutted")),c.forEach((function(t){d.push(e.getClass("abutted")+"-"+t)})),T((function(){!1!==e.options.addTargetClasses&&C(e.target,d,u),C(e.element,d,u)})),!0}}),x=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(h){i=!0,r=h}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:o}));var i=void 0,r=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var s=x(n,2);i=s[0],r=s[1],i=parseFloat(i,10),r=parseFloat(r,10)}else i=n.top,r=n.left;return{top:e+=i,left:o+=r}}}}),Y},"function"==typeof define&&define.amd?define([],C):"object"==typeof T?T=C():this.Tether=C();var E,O={};E=function(t){"use strict";var e=Function.prototype.bind,o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(h){i=!0,r=h}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=function(t,e,o){for(var n=!0;n;){var i=t,r=e,s=o;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var h=a.get;if(void 0===h)return;return h.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=r,o=s,n=!0,a=l=void 0}},r=t.Utils,s=r.extend,a=r.addClass,h=r.removeClass,l=r.hasClass,f=r.Evented;function c(t){var e=t.split(" "),n=o(e,2),i=n[0],r=n[1];if(["left","right"].indexOf(i)>=0){var s=[r,i];i=s[0],r=s[1]}return[i,r].join(" ")}function u(t,e){for(var o=void 0,n=[];-1!==(o=t.indexOf(e));)n.push(t.splice(o,1));return n}var d=["click"];"ontouchstart"in document.documentElement&&d.push("touchstart");var p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},g="";for(var v in p)({}).hasOwnProperty.call(p,v)&&void 0!==document.createElement("p").style[v]&&(g=p[v]);var m={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},b={},y=function o(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],p=function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];return new(e.apply(y,[null].concat(o)))};s(p,{createContext:o,drops:[],defaults:{}});var v={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,tetherOptions:{}}};s(p,v,r),s(p.defaults,v.defaults,r.defaults),void 0===b[p.classPrefix]&&(b[p.classPrefix]=[]),p.updateBodyClasses=function(){for(var t=!1,e=b[p.classPrefix],o=e.length,n=0;n<o;++n)if(e[n].isOpened()){t=!0;break}t?a(document.body,p.classPrefix+"-open"):h(document.body,p.classPrefix+"-open")};var y=function(e){function o(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.options=s({},p.defaults,t),this.target=this.options.target,void 0===this.target)throw new Error("Drop Error: You must provide a target.");var e="data-"+p.classPrefix,n=this.target.getAttribute(e);n&&null==this.options.content&&(this.options.content=n);for(var r=["position","openOn"],h=0;h<r.length;++h){var l=this.target.getAttribute(e+"-"+r[h]);l&&null==this.options[r[h]]&&(this.options[r[h]]=l)}this.options.classes&&!1!==this.options.addTargetClasses&&a(this.target,this.options.classes),p.drops.push(this),b[p.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,f),n(o,[{key:"_on",value:function(t,e,o){this._boundEvents.push({element:t,event:e,handler:o}),t.addEventListener(e,o)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),a(this.drop,p.classPrefix),this.options.classes&&a(this.drop,this.options.classes),this.content=document.createElement("div"),a(this.content,p.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};e(),this.on("open",e.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=m[e[0]],e=e.join(" ");var o=[];this.options.constrainToScrollParent?o.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):o.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?o.push({to:"window",attachment:"together"}):o.push({to:"window"});var n={element:this.drop,target:this.target,attachment:c(e),targetAttachment:c(this.options.position),classPrefix:p.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:o,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new t(s({},n,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn)if("always"!==this.options.openOn){var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var o=function(e){t.toggle(e),e.preventDefault()},n=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},i=0;i<d.length;++i){var r=d[i];this._on(this.target,r,o),this._on(document,r,n)}var s=null,a=null,h=function(e){null!==a?clearTimeout(a):s=setTimeout((function(){t.open(e),s=null}),("focus"===e.type?t.options.focusDelay:t.options.hoverOpenDelay)||t.options.openDelay)},l=function(e){null!==s?clearTimeout(s):a=setTimeout((function(){t.close(e),a=null}),("blur"===e.type?t.options.blurDelay:t.options.hoverCloseDelay)||t.options.closeDelay)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",h),this._on(this.drop,"mouseover",h),this._on(this.target,"mouseout",l),this._on(this.drop,"mouseout",l)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",h),this._on(this.drop,"focus",h),this._on(this.target,"blur",l),this._on(this.drop,"blur",l))}else setTimeout(this.open.bind(this))}},{key:"isOpened",value:function(){if(this.drop)return l(this.drop,p.classPrefix+"-open")}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),void 0!==this.tether&&this.tether.enable(),a(this.drop,p.classPrefix+"-open"),a(this.drop,p.classPrefix+"-open-transitionend"),setTimeout((function(){e.drop&&a(e.drop,p.classPrefix+"-after-open")})),void 0!==this.tether&&this.tether.position(),this.trigger("open"),p.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(l(this.drop,p.classPrefix+"-open")||h(this.drop,p.classPrefix+"-open-transitionend"),this.drop.removeEventListener(g,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=!1!==this.options.beforeClose(t,this)),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(h(this.drop,p.classPrefix+"-open"),h(this.drop,p.classPrefix+"-after-open"),this.drop.addEventListener(g,this.transitionEndHandler),this.trigger("close"),void 0!==this.tether&&this.tether.disable(),p.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&void 0!==this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),void 0!==this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],o=e.element,n=e.event,i=e.handler;o.removeEventListener(n,i)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,u(b[p.classPrefix],this),u(p.drops,this)}}]),o}();return p}();return document.addEventListener("DOMContentLoaded",(function(){y.updateBodyClasses()})),y},"function"==typeof define&&define.amd?define(["tether"],E):"object"==typeof O?O=E(T):this.Drop=E(this.Tether);var x,P=O.createContext({classPrefix:"ezra"});function I(e,o){var i=t.loading+"..."+t.refText(o),r=new P({classes:"ezra-theme-arrows",target:e,content:document.createTextNode(i),openOn:"hover",constrainToScrollParent:!1,tetherOptions:{constraints:[{to:"window",attachment:"together",pin:["left","right"]}]}});r.on("open",(function(){var e=window.getComputedStyle(this.target).fontSize;this.content.style.fontSize=e,this.content.innerText=i,n.getVerses(o,(function(e){var o=e.data||t[e.errCode];r.content.innerText=o,r.position()}))}))}function S(t,e){for(var o=[];e.length>0;){var n=e.shift(),i=k(t,n.text);i[0]&&o.push(document.createTextNode(i[0])),o.push(J(n)),t=i[1]}return t&&o.push(document.createTextNode(t)),o}function J(t){var e=document.createElement("a");return e.innerText=t.text,e.dataset.ezraRef=JSON.stringify(t),e}function k(t,e){var o=t.split(e);return[o.shift(),o.join(e)]}function A(t,e){for(var o=e.length-1;o>0;o--)t.parentNode.insertBefore(e[o],t.nextSibling);t.parentNode.replaceChild(e[0],t)}(x=window.ezraLinkifier=window.ezraLinkifier||{}).linkify=function(t){for(var e=function(t){var e=[];return function t(o){if(3==o.nodeType)e.push(o);else for(var n=0;n<o.childNodes.length;n++)t(o.childNodes[n])}(t),e}(t),o=0;o<e.length;o++)if("A"!==e[o].parentNode.nodeName){var n=w(e[o].nodeValue);if(n.length>0){var i=S(e[o].nodeValue,n);A(e[o],i)}}var r=t.querySelectorAll("a[data-ezra-ref]");for(o=0;o<r.length;o++){var s=r[o];I(s,JSON.parse(s.dataset.ezraRef))}},x.setLang=function(e){t.setLang(e)}}();
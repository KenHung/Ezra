/*! Ezra - Linkifiy Chinese Bible Reference <https://kenhung.github.io/Ezra/>
    Copyright (C) 2016  Ken Hung

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.
 */
!function(){var t=new function(){var t={};this.getVerses=function(o,n){var i=o.lang+o.refText;t.hasOwnProperty(i)?n({data:t[i]+o.refText}):function(t,o,n){var i=new XMLHttpRequest;i.onerror=function(){n(e.connectFail)},i.onload=function(){if(200===i.status)try{var t=JSON.parse(i.responseText);if("success"!==t.status)return void n(e.verseNotFound,"FHL response text = "+i.responseText);if(0===t.record.length)return void n(e.refInvalid);for(var r="",s=0,a=0;a<t.record.length;a++){var l=t.record[a];a>0&&l.sec>s+1&&(r+="\u22ef\u22ef"),s=l.sec,r+=l.bible_text}o(r)}catch(h){n(e.verseNotFound,h)}else n(e.verseNotFound,"XHR status = "+i.status)};try{var r="https://bible.fhl.net/json/qb.php?chineses="+t.abbr+"&chap="+t.chap+"&sec="+t.vers+"&gb="+t.lang;i.open("GET",r,!0),i.send()}catch(s){n(e.verseNotFound,s)}}(o,(function(e){t[i]=e,n({data:e+o.refText})}),(function(t,e){n({errCode:t,errMsg:e})}))}},e=Object.freeze({connectFail:"connectFail",verseNotFound:"verseNotFound",refInvalid:"refInvalid"}),o={res:{},set:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);var o=Object.keys(this.abbr),n=Object.values(this.abbr).filter((function(t){return!t.match(/[\u4e00\u4e8c\u4e09]/)}));this.namesOfAllBooks=o.concat(n).join("|")},add:function(t,e){this.set(e),this.res[t]=e},setLang:function(t){var e=this.res[t];this.set(e)}},n=Object.freeze({abbr:{"\u521b\u4e16\u8bb0":"\u521b","\u51fa\u57c3\u53ca\u8bb0":"\u51fa","\u5229\u672a\u8bb0":"\u5229","\u6c11\u6570\u8bb0":"\u6c11","\u7533\u547d\u8bb0":"\u7533","\u7ea6\u4e66\u4e9a\u8bb0":"\u4e66","\u58eb\u5e08\u8bb0":"\u58eb","\u8def\u5f97\u8bb0":"\u5f97","\u6492\u6bcd\u8033\u8bb0\u4e0a":"\u6492\u4e0a","\u6492\u6bcd\u8033\u8bb0\u4e0b":"\u6492\u4e0b","\u5217\u738b\u7eaa\u4e0a":"\u738b\u4e0a","\u5217\u738b\u7eaa\u4e0b":"\u738b\u4e0b","\u5386\u4ee3\u5fd7\u4e0a":"\u4ee3\u4e0a","\u5386\u4ee3\u5fd7\u4e0b":"\u4ee3\u4e0b","\u4ee5\u65af\u62c9\u8bb0":"\u62c9","\u5c3c\u5e0c\u7c73\u8bb0":"\u5c3c","\u4ee5\u65af\u5e16\u8bb0":"\u65af","\u7ea6\u4f2f\u8bb0":"\u4f2f","\u8bd7\u7bc7":"\u8bd7","\u7bb4\u8a00":"\u7bb4","\u4f20\u9053\u4e66":"\u4f20","\u96c5\u6b4c":"\u6b4c","\u4ee5\u8d5b\u4e9a\u4e66":"\u8d5b","\u8036\u5229\u7c73\u4e66":"\u8036","\u8036\u5229\u7c73\u54c0\u6b4c":"\u54c0","\u4ee5\u897f\u7ed3\u4e66":"\u7ed3","\u4f46\u4ee5\u7406\u4e66":"\u4f46","\u4f55\u897f\u963f\u4e66":"\u4f55","\u7ea6\u73e5\u4e66":"\u73e5","\u963f\u6469\u53f8\u4e66":"\u6469","\u4fc4\u5df4\u5e95\u4e9a\u4e66":"\u4fc4","\u7ea6\u62ff\u4e66":"\u62ff","\u5f25\u8fe6\u4e66":"\u5f25","\u90a3\u9e3f\u4e66":"\u9e3f","\u54c8\u5df4\u8c37\u4e66":"\u54c8","\u897f\u756a\u96c5\u4e66":"\u756a","\u54c8\u8be5\u4e66":"\u8be5","\u6492\u8fe6\u5229\u4e9a\u4e66":"\u4e9a","\u739b\u62c9\u57fa\u4e66":"\u739b","\u9a6c\u592a\u798f\u97f3":"\u592a","\u9a6c\u53ef\u798f\u97f3":"\u53ef","\u8def\u52a0\u798f\u97f3":"\u8def","\u7ea6\u7ff0\u798f\u97f3":"\u7ea6","\u4f7f\u5f92\u884c\u4f20":"\u5f92","\u7f57\u9a6c\u4e66":"\u7f57","\u54e5\u6797\u591a\u524d\u4e66":"\u6797\u524d","\u54e5\u6797\u591a\u540e\u4e66":"\u6797\u540e","\u52a0\u62c9\u592a\u4e66":"\u52a0","\u4ee5\u5f17\u6240\u4e66":"\u5f17","\u8153\u7acb\u6bd4\u4e66":"\u8153","\u6b4c\u7f57\u897f\u4e66":"\u897f","\u5e16\u6492\u7f57\u5c3c\u8fe6\u524d\u4e66":"\u5e16\u524d","\u5e16\u6492\u7f57\u5c3c\u8fe6\u540e\u4e66":"\u5e16\u540e","\u63d0\u6469\u592a\u524d\u4e66":"\u63d0\u524d","\u63d0\u6469\u592a\u540e\u4e66":"\u63d0\u540e","\u63d0\u591a\u4e66":"\u591a","\u8153\u5229\u95e8\u4e66":"\u95e8","\u5e0c\u4f2f\u6765\u4e66":"\u6765","\u96c5\u5404\u4e66":"\u96c5","\u5f7c\u5f97\u524d\u4e66":"\u5f7c\u524d","\u5f7c\u5f97\u540e\u4e66":"\u5f7c\u540e","\u7ea6\u7ff0\u58f9\u4e66":"\u7ea6\u4e00","\u7ea6\u7ff0\u8d30\u4e66":"\u7ea6\u4e8c","\u7ea6\u7ff0\u53c1\u4e66":"\u7ea6\u4e09","\u72b9\u5927\u4e66":"\u72b9","\u542f\u793a\u5f55":"\u542f","\u54e5\u524d":"\u6797\u524d","\u54e5\u540e":"\u6797\u540e","\u6b4c\u524d":"\u6797\u524d","\u6b4c\u540e":"\u6797\u540e","\u5e0c":"\u6765","\u7ea6\u7ff0\u4e00\u4e66":"\u7ea6\u4e00","\u7ea6\u7ff0\u4e8c\u4e66":"\u7ea6\u4e8c","\u7ea6\u7ff0\u4e09\u4e66":"\u7ea6\u4e09","\u7ea6\u7ff0\u53c2\u4e66":"\u7ea6\u4e09","\u7ea6\u58f9":"\u7ea6\u4e00","\u7ea6\u8d30":"\u7ea6\u4e8c","\u7ea6\u53c1":"\u7ea6\u4e09","\u7ea6\u53c2":"\u7ea6\u4e09"},singleChapterBooks:"\u4fc4\u5df4\u5e95\u4e9a\u4e66|\u4fc4|\u8153\u5229\u95e8\u4e66|\u95e8|\u72b9\u5927\u4e66|\u72b9|\u7ea6\u7ff0\u4e8c\u4e66|\u7ea6\u7ff0\u4e09\u4e66|\u7ea6\u7ff0\u8d30\u4e66|\u7ea6\u7ff0\u53c1\u4e66|\u7ea6\u7ff0\u53c2\u4e66|\u7ea6\u8d30|\u7ea6\u53c1|\u7ea6\u53c2",loading:"\u8f7d\u5165\u4e2d",connectFail:"\u65e0\u6cd5\u8fde\u4e0a\u4f3a\u670d\u5668\u3002 ",verseNotFound:"\u672a\u80fd\u67e5\u8a3d\u7ecf\u6587\u3002",refInvalid:"\u627e\u4e0d\u5230\u8bb0\u5f55\uff01\u5723\u7ecf\u4e2d\u6ca1\u6709\u8fd9\u7ae0\u8282\u3002",fhl_gb:1}),i=Object.freeze({abbr:{"\u5275\u4e16\u8a18":"\u5275","\u51fa\u57c3\u53ca\u8a18":"\u51fa","\u5229\u672a\u8a18":"\u5229","\u6c11\u6578\u8a18":"\u6c11","\u7533\u547d\u8a18":"\u7533","\u7d04\u66f8\u4e9e\u8a18":"\u66f8","\u58eb\u5e2b\u8a18":"\u58eb","\u8def\u5f97\u8a18":"\u5f97","\u6492\u6bcd\u8033\u8a18\u4e0a":"\u6492\u4e0a","\u6492\u6bcd\u8033\u8a18\u4e0b":"\u6492\u4e0b","\u5217\u738b\u7d00\u4e0a":"\u738b\u4e0a","\u5217\u738b\u7d00\u4e0b":"\u738b\u4e0b","\u6b77\u4ee3\u5fd7\u4e0a":"\u4ee3\u4e0a","\u6b77\u4ee3\u5fd7\u4e0b":"\u4ee3\u4e0b","\u4ee5\u65af\u62c9\u8a18":"\u62c9","\u5c3c\u5e0c\u7c73\u8a18":"\u5c3c","\u4ee5\u65af\u5e16\u8a18":"\u65af","\u7d04\u4f2f\u8a18":"\u4f2f","\u8a69\u7bc7":"\u8a69","\u7bb4\u8a00":"\u7bb4","\u50b3\u9053\u66f8":"\u50b3","\u96c5\u6b4c":"\u6b4c","\u4ee5\u8cfd\u4e9e\u66f8":"\u8cfd","\u8036\u5229\u7c73\u66f8":"\u8036","\u8036\u5229\u7c73\u54c0\u6b4c":"\u54c0","\u4ee5\u897f\u7d50\u66f8":"\u7d50","\u4f46\u4ee5\u7406\u66f8":"\u4f46","\u4f55\u897f\u963f\u66f8":"\u4f55","\u7d04\u73e5\u66f8":"\u73e5","\u963f\u6469\u53f8\u66f8":"\u6469","\u4fc4\u5df4\u5e95\u4e9e\u66f8":"\u4fc4","\u7d04\u62ff\u66f8":"\u62ff","\u5f4c\u8fe6\u66f8":"\u5f4c","\u90a3\u9d3b\u66f8":"\u9d3b","\u54c8\u5df4\u8c37\u66f8":"\u54c8","\u897f\u756a\u96c5\u66f8":"\u756a","\u54c8\u8a72\u66f8":"\u8a72","\u6492\u8fe6\u5229\u4e9e\u66f8":"\u4e9e","\u746a\u62c9\u57fa\u66f8":"\u746a","\u99ac\u592a\u798f\u97f3":"\u592a","\u99ac\u53ef\u798f\u97f3":"\u53ef","\u8def\u52a0\u798f\u97f3":"\u8def","\u7d04\u7ff0\u798f\u97f3":"\u7d04","\u4f7f\u5f92\u884c\u50b3":"\u5f92","\u7f85\u99ac\u66f8":"\u7f85","\u54e5\u6797\u591a\u524d\u66f8":"\u6797\u524d","\u54e5\u6797\u591a\u5f8c\u66f8":"\u6797\u5f8c","\u52a0\u62c9\u592a\u66f8":"\u52a0","\u4ee5\u5f17\u6240\u66f8":"\u5f17","\u8153\u7acb\u6bd4\u66f8":"\u8153","\u6b4c\u7f85\u897f\u66f8":"\u897f","\u5e16\u6492\u7f85\u5c3c\u8fe6\u524d\u66f8":"\u5e16\u524d","\u5e16\u6492\u7f85\u5c3c\u8fe6\u5f8c\u66f8":"\u5e16\u5f8c","\u63d0\u6469\u592a\u524d\u66f8":"\u63d0\u524d","\u63d0\u6469\u592a\u5f8c\u66f8":"\u63d0\u5f8c","\u63d0\u591a\u66f8":"\u591a","\u8153\u5229\u9580\u66f8":"\u9580","\u5e0c\u4f2f\u4f86\u66f8":"\u4f86","\u96c5\u5404\u66f8":"\u96c5","\u5f7c\u5f97\u524d\u66f8":"\u5f7c\u524d","\u5f7c\u5f97\u5f8c\u66f8":"\u5f7c\u5f8c","\u7d04\u7ff0\u58f9\u66f8":"\u7d04\u4e00","\u7d04\u7ff0\u8cb3\u66f8":"\u7d04\u4e8c","\u7d04\u7ff0\u53c1\u66f8":"\u7d04\u4e09","\u7336\u5927\u66f8":"\u7336","\u555f\u793a\u9304":"\u555f","\u54e5\u524d":"\u6797\u524d","\u54e5\u5f8c":"\u6797\u5f8c","\u6b4c\u524d":"\u6797\u524d","\u6b4c\u5f8c":"\u6797\u5f8c","\u5e0c":"\u4f86","\u7d04\u7ff0\u4e00\u66f8":"\u7d04\u4e00","\u7d04\u7ff0\u4e8c\u66f8":"\u7d04\u4e8c","\u7d04\u7ff0\u4e09\u66f8":"\u7d04\u4e09","\u7d04\u7ff0\u53c3\u66f8":"\u7d04\u4e09","\u7d04\u58f9":"\u7d04\u4e00","\u7d04\u8cb3":"\u7d04\u4e8c","\u7d04\u53c1":"\u7d04\u4e09","\u7d04\u53c3":"\u7d04\u4e09","\u5553\u793a\u9304":"\u555f","\u5553":"\u555f"},singleChapterBooks:"\u4fc4\u5df4\u5e95\u4e9e\u66f8|\u4fc4|\u8153\u5229\u9580\u66f8|\u9580|\u7336\u5927\u66f8|\u7336|\u7d04\u7ff0\u4e8c\u66f8|\u7d04\u7ff0\u4e09\u66f8|\u7d04\u7ff0\u8cb3\u66f8|\u7d04\u7ff0\u53c1\u66f8|\u7d04\u7ff0\u53c3\u66f8|\u7d04\u8cb3|\u7d04\u53c1|\u7d04\u53c3",loading:"\u8f09\u5165\u4e2d",connectFail:"\u7121\u6cd5\u9023\u4e0a\u4f3a\u670d\u5668\u3002",verseNotFound:"\u672a\u80fd\u67e5\u8a3d\u7d93\u6587\u3002",refInvalid:"\u627e\u4e0d\u5230\u8a18\u9304\uff01\u8056\u7d93\u4e2d\u6c92\u6709\u9019\u7ae0\u7bc0\u3002",fhl_gb:0}),r={},s={"\u25cb":0,"\u96f6":0,"\u4e00":1,"\u4e8c":2,"\u4e09":3,"\u56db":4,"\u4e94":5,"\u516d":6,"\u4e03":7,"\u516b":8,"\u4e5d":9},a={"\u5341":10,"\u5eff":20,"\u5345":30,"\u534c":40,"\u767e":100},l=Object.keys(s),h=Object.keys(a);function f(t){return!!a[t]}r.supportedChars=l.concat(h).join(""),r.parse=function(t){if(isNaN(t)){if(function(t){for(var e=0;e<t.length;e++)if(a[t[e]])return!0;return!1}(t)){for(var e=[],o=0;o<t.length;o++){var n=t[o];f(n)?(0===e.length&&e.push(1),e[e.length-1]*=a[n]):e.push(s[n]||0)}return function(t){for(var e=0,o=0;o<t.length;o++)e+=t[o];return e}(e)}var i=t.split("").map((function(t){return s[t]})).join("");return parseInt(i,10)}return+t},o.add("zh-Hans",n),o.add("zh-Hant",i);function u(t,e,n,i,s){this.text=t,this.pos=e,this.abbr=function(t){return o.abbr[t]||t}(n),this.chap=r.parse(i.replace(new RegExp("[:\uff1a\ufe30\u7bc7\u7ae0]","g"),"")),this.vers=function(t){return t.replace(new RegExp("[\\-\u2500\u2013\uff0d\u2014~\uff5e\u301c\u81f3]","g"),"-").replace(new RegExp("[,\uff0c\u3001\u548c\u53ca]","g"),",").replace(/[\u7bc0\u8282\s]/g,"")}(s),this.refText="("+this.abbr+" "+this.chap+":"+this.vers+")",this.lang=o.fhl_gb}var c,d=function(){var t="("+o.namesOfAllBooks+")",e="("+o.singleChapterBooks+")",n="(\u7b2c?["+r.supportedChars+"]+[:\uff1a\ufe30\u7bc7\u7ae0]?|\\d+[:\uff1a\ufe30\u7bc7\u7ae0])",i="\u7b2c?([,\uff0c\u3001\u548c\u53ca\\-\u2500\u2013\uff0d\u2014~\uff5e\u301c\u81f3;\uff1b\u7bc0\u8282\\s\\d]*\\d)[\u7bc0\u8282]?",s=new RegExp(t+"?\\s?"+n+i,"g"),a=new RegExp(e+"\\s?"+i,"g");function l(t,e){var o=t.match(e);if(o){var n=t.lastIndexOf(o[o.length-1]);return t.substring(0,n)}return t}this.detect=function(t){for(var e,o=[],n="";null!==(e=s.exec(t));){var r=e[0],h=e[3],f=t.substring(s.lastIndex),c=h.match(/\d+/g);if(0===f.search(new RegExp("\\s?[:\uff1a\ufe30\u7bc7\u7ae0]"+i))&&c.length>1){var d=new RegExp("[,\uff0c\u3001\u548c\u53ca;\uff1b\\s]+"+c[c.length-1]);h=l(h,d);var p=l(r,d);s.lastIndex-=r.length-p.length,r=p}var g=e[1]||n;g&&o.push(new u(r,e.index,g,e[2],h)),n=g}for(;null!==(e=a.exec(t));)o.push(new u(e[0],e.index,e[1],"1",e[2]));return o}},p={};c=function(){"use strict";var t=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=void 0;void 0===o&&(o={modules:[]});var n=null;function i(t){var e=t.getBoundingClientRect(),o={};for(var n in e)o[n]=e[n];try{if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=i(r);o.top+=s.top,o.bottom+=s.top,o.left+=s.left,o.right+=s.left}}}catch(a){}return o}function r(t){var e=(getComputedStyle(t)||{}).position,o=[];if("fixed"===e)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var i=void 0;try{i=getComputedStyle(n)}catch(h){}if(null==i)return o.push(n),o;var r=i,s=r.overflow,a=r.overflowX,l=r.overflowY;/(auto|scroll|overlay)/.test(s+l+a)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(i.position)>=0)&&o.push(n)}return o.push(t.ownerDocument.body),t.ownerDocument!==document&&o.push(t.ownerDocument.defaultView),o}var s,a=(s=0,function(){return++s}),l={};function h(){n&&document.body.removeChild(n),n=null}function f(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,r=i(t),s=function(){var t=n;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",a()),p(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),n=t);var e=t.getAttribute("data-tether-id");return void 0===l[e]&&(l[e]=i(t),C((function(){delete l[e]}))),l[e]}();return r.top-=s.top,r.left-=s.left,void 0===r.width&&(r.width=document.body.scrollWidth-r.left-r.right),void 0===r.height&&(r.height=document.body.scrollHeight-r.top-r.bottom),r.top=r.top-o.clientTop,r.left=r.left-o.clientLeft,r.right=e.body.clientWidth-r.width-r.left,r.bottom=e.body.clientHeight-r.height-r.top,r}function u(t){return t.offsetParent||document.documentElement}var c=null;function d(){if(c)return c;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");p(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;o===n&&(n=e.clientWidth),document.body.removeChild(e);var i=o-n;return c={width:i,height:i}}function p(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach((function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])})),t}function g(t,e){if(void 0!==t.classList)e.split(" ").forEach((function(e){e.trim()&&t.classList.remove(e)}));else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=b(t).replace(o," ");y(t,n)}}function v(t,e){if(void 0!==t.classList)e.split(" ").forEach((function(e){e.trim()&&t.classList.add(e)}));else{g(t,e);var o=b(t)+" "+e;y(t,o)}}function m(t,e){if(void 0!==t.classList)return t.classList.contains(e);var o=b(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function b(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function y(t,e){t.setAttribute("class",e)}function w(t,e,o){o.forEach((function(o){-1===e.indexOf(o)&&m(t,o)&&g(t,o)})),e.forEach((function(e){m(t,e)||v(t,e)}))}var O=[],C=function(t){O.push(t)},x=function(){for(var t=void 0;t=O.pop();)t()},E=function(){function o(){e(this,o)}return t(o,[{key:"on",value:function(t,e,o){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:n})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,n=Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,l=r.once,h=a;void 0===h&&(h=this),s.apply(h,n),l?this.bindings[t].splice(e,1):++e}}}}]),o}();o.Utils={getActualBoundingClientRect:i,getScrollParents:r,getBounds:f,getOffsetParent:u,extend:p,addClass:v,removeClass:g,hasClass:m,updateClasses:w,defer:C,flush:x,uniqueId:a,Evented:E,getScrollBarSize:d,removeUtilElements:h};var T=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(l){i=!0,r=l}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=(t=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),function(t,e,o){for(var n=!0;n;){var i=t,r=e,s=o;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(i);if(null===h)return;t=h,e=r,o=s,n=!0,a=h=void 0}});function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}if(void 0===o)throw new Error("You must include the utils.js file before tether.js");var r=(q=o.Utils).getScrollParents,u=(f=q.getBounds,q.getOffsetParent),v=(p=q.extend,q.addClass),g=q.removeClass,d=(w=q.updateClasses,C=q.defer,x=q.flush,q.getScrollBarSize),h=q.removeUtilElements;function k(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}var _,A,j,S,N=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var n=e[o];if(void 0!==t.style[n])return n}}(),z=[],D=function(){z.forEach((function(t){t.position(!1)})),x()};function F(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():+new Date}_=null,A=null,j=null,S=function t(){if(void 0!==A&&A>16)return A=Math.min(A-16,250),void(j=setTimeout(t,250));void 0!==_&&F()-_<10||(null!=j&&(clearTimeout(j),j=null),_=F(),D(),A=F()-_)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach((function(t){window.addEventListener(t,S)}));var M={center:"center",left:"right",right:"left"},L={middle:"middle",top:"bottom",bottom:"top"},H={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},B=function(t){var e=t.left,o=t.top;return void 0!==H[t.left]&&(e=H[t.left]),void 0!==H[t.top]&&(o=H[t.top]),{left:e,top:o}};function W(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];return o.forEach((function(e){var o=e.top,n=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof n&&(n=parseFloat(n,10)),t.top+=o,t.left+=n})),t}function R(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var Y=function(t){var e=t.split(" "),o=T(e,2);return{top:o[0],left:o[1]}},X=Y,I=function(n){function i(t){var n=this;e(this,i),P(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.position=this.position.bind(this),z.push(this),this.history=[],this.setOptions(t,!1),o.modules.forEach((function(t){void 0!==t.initialize&&t.initialize.call(n)})),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,E),t(i,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=p({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var n=this.options,i=n.element,s=n.target,a=n.targetModifier;if(this.element=i,this.target=s,this.targetModifier=a,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach((function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),v(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&v(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=X(this.options.targetAttachment),this.attachment=X(this.options.attachment),this.offset=Y(this.options.offset),this.targetOffset=Y(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),!1!==this.options.enabled&&this.enable(o)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return f(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=f(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=f(e);var o=getComputedStyle(e),n=0;(e.scrollWidth>e.clientWidth||[o.overflow,o.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(n=15);var i=t.height-parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)-n,r={width:15,height:.975*i*(i/e.scrollHeight),left:t.left+t.width-parseFloat(o.borderLeftWidth)-15},s=0;i<408&&this.target===document.body&&(s=-11e-5*Math.pow(i,2)-.00727*i+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24));var a=this.target.scrollTop/(e.scrollHeight-i);return r.top=a*(i-r.height-s)+t.top+parseFloat(o.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&v(this.target,this.getClass("enabled")),v(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach((function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)})),e&&this.position()}},{key:"disable",value:function(){var t=this;g(this.target,this.getClass("enabled")),g(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.position)}))}},{key:"destroy",value:function(){var t=this;this.disable(),z.forEach((function(e,o){e===t&&z.splice(o,1)})),0===z.length&&h()}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment,void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var i=[];["left","top","bottom","right","middle","center"].forEach((function(t){i.push(o.getClass("element-attached")+"-"+t),i.push(o.getClass("target-attached")+"-"+t)})),C((function(){void 0!==o._addAttachClasses&&(w(o.element,o._addAttachClasses,i),!1!==o.options.addTargetClasses&&w(o.target,o._addAttachClasses,i),delete o._addAttachClasses)}))}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=function(t,e){var o=t.left,n=t.top;return"auto"===o&&(o=M[e.left]),"auto"===n&&(n=L[e.top]),{left:o,top:n}}(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",(function(){return f(t.element)})),r=i.width,s=i.height;if(0===r&&0===s&&void 0!==this.lastSize){var a=this.lastSize;r=a.width,s=a.height}else this.lastSize={width:r,height:s};var l=this.cache("target-bounds",(function(){return t.getTargetBounds()})),h=l,c=R(B(this.attachment),{width:r,height:s}),p=R(B(n),h),g=R(this.offset,{width:r,height:s}),v=R(this.targetOffset,h);c=W(c,g),p=W(p,v);for(var m=l.left+p.left-c.left,b=l.top+p.top-c.top,y=0;y<o.modules.length;++y){var w=o.modules[y].position.call(this,{left:m,top:b,targetAttachment:n,targetPos:l,elementPos:i,offset:c,targetOffset:p,manualOffset:g,manualTargetOffset:v,scrollbarSize:T,attachment:this.attachment});if(!1===w)return!1;void 0!==w&&"object"==typeof w&&(b=w.top,m=w.left)}var O={page:{top:b,left:m},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-s+innerHeight,left:m-pageXOffset,right:pageXOffset-m-r+innerWidth}},C=this.target.ownerDocument,E=C.defaultView,T=void 0;return E.innerHeight>C.documentElement.clientHeight&&(T=this.cache("scrollbar-size",d),O.viewport.bottom-=T.height),E.innerWidth>C.documentElement.clientWidth&&(T=this.cache("scrollbar-size",d),O.viewport.right-=T.width),-1!==["","static"].indexOf(C.body.style.position)&&-1!==["","static"].indexOf(C.body.parentElement.style.position)||(O.page.bottom=C.body.scrollHeight-b-s,O.page.right=C.body.scrollWidth-m-r),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",(function(){return u(t.target)})),o=t.cache("target-offsetparent-bounds",(function(){return f(e)})),n=getComputedStyle(e),i=o,r={};if(["Top","Left","Bottom","Right"].forEach((function(t){r[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])})),o.right=C.body.scrollWidth-o.left-i.width+r.right,o.bottom=C.body.scrollHeight-o.top-i.height+r.bottom,O.page.top>=o.top+r.top&&O.page.bottom>=o.bottom&&O.page.left>=o.left+r.left&&O.page.right>=o.right){var s=e.scrollTop,a=e.scrollLeft;O.offset={top:O.page.top-o.top+s-r.top,left:O.page.left-o.left+a-r.left}}}(),this.move(O),this.history.unshift(O),this.history.length>3&&this.history.pop(),e&&x(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var o={};for(var n in t)for(var i in o[n]={},t[n]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if(void 0!==a[n]&&!k(a[n][i],t[n][i])){r=!0;break}}r||(o[n][i]=!0)}var l,h,f={top:"",left:"",right:"",bottom:""},c=function(t,o){if(!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)){var n=void 0,i=void 0;t.top?(f.top=0,n=o.top):(f.bottom=0,n=-o.bottom),t.left?(f.left=0,i=o.left):(f.right=0,i=-o.right),"number"==typeof window.devicePixelRatio&&devicePixelRatio%1==0&&(i=Math.round(i*devicePixelRatio)/devicePixelRatio,n=Math.round(n*devicePixelRatio)/devicePixelRatio),f[N]="translateX("+i+"px) translateY("+n+"px)","msTransform"!==N&&(f[N]+=" translateZ(0)")}else t.top?f.top=o.top+"px":f.bottom=o.bottom+"px",t.left?f.left=o.left+"px":f.right=o.right+"px"},d=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(f.position="absolute",c(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(f.position="fixed",c(o.viewport,t.viewport)):void 0!==o.offset&&o.offset.top&&o.offset.left?function(){f.position="absolute";var n=e.cache("target-offsetparent",(function(){return u(e.target)}));u(e.element)!==n&&C((function(){e.element.parentNode.removeChild(e.element),n.appendChild(e.element)})),c(o.offset,t.offset),d=!0}():(f.position="absolute",c({top:!0,left:!0},t.page)),!d)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var g=!0,v=this.element.parentNode;v&&1===v.nodeType&&"BODY"!==v.tagName&&(void 0,((h=(l=v).ownerDocument).fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement)!==l);){if("static"!==getComputedStyle(v).position){g=!1;break}v=v.parentNode}g||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var m={},b=!1;for(var i in f){var y=f[i];this.element.style[i]!==y&&(b=!0,m[i]=y)}b&&C((function(){p(e.element.style,m),e.trigger("repositioned")}))}}}]),i}();I.modules=[],o.position=D;var V=p(I,o),p=(T=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(l){i=!0,r=l}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=(q=o.Utils).getBounds,q.extend),U=(w=q.updateClasses,C=q.defer,["left","top","right","bottom"]);o.modules.push({position:function(t){var e=this,o=t.top,n=t.left,i=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",(function(){return f(e.element)})),s=r.height,a=r.width;if(0===a&&0===s&&void 0!==this.lastSize){var l=this.lastSize;a=l.width,s=l.height}var h=this.cache("target-bounds",(function(){return e.getTargetBounds()})),u=h.height,c=h.width,d=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach((function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&d.push(e),o&&d.push(o)})),d.forEach((function(t){["left","top","right","bottom"].forEach((function(e){d.push(t+"-"+e)}))}));var g=[],v=p({},i),m=p({},this.attachment);return this.options.constraints.forEach((function(t){var r=t.to,l=t.attachment,h=t.pin;void 0===l&&(l="");var d=void 0,p=void 0;if(l.indexOf(" ")>=0){var b=l.split(" "),y=T(b,2);p=y[0],d=y[1]}else d=p=l;var w=function(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&function(){var t=e,o=f(e),n=o,i=getComputedStyle(e);if(e=[n.left,n.top,o.width+n.left,o.height+n.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}U.forEach((function(t,o){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[o]+=parseFloat(i["border"+t+"Width"]):e[o]-=parseFloat(i["border"+t+"Width"])}))}(),e}(e,r);"target"!==p&&"both"!==p||(o<w[1]&&"top"===v.top&&(o+=u,v.top="bottom"),o+s>w[3]&&"bottom"===v.top&&(o-=u,v.top="top")),"together"===p&&("top"===v.top&&("bottom"===m.top&&o<w[1]?(o+=u,v.top="bottom",o+=s,m.top="top"):"top"===m.top&&o+s>w[3]&&o-(s-u)>=w[1]&&(o-=s-u,v.top="bottom",m.top="bottom")),"bottom"===v.top&&("top"===m.top&&o+s>w[3]?(o-=u,v.top="top",o-=s,m.top="bottom"):"bottom"===m.top&&o<w[1]&&o+(2*s-u)<=w[3]&&(o+=s-u,v.top="top",m.top="top")),"middle"===v.top&&(o+s>w[3]&&"top"===m.top?(o-=s,m.top="bottom"):o<w[1]&&"bottom"===m.top&&(o+=s,m.top="top"))),"target"!==d&&"both"!==d||(n<w[0]&&"left"===v.left&&(n+=c,v.left="right"),n+a>w[2]&&"right"===v.left&&(n-=c,v.left="left")),"together"===d&&(n<w[0]&&"left"===v.left?"right"===m.left?(n+=c,v.left="right",n+=a,m.left="left"):"left"===m.left&&(n+=c,v.left="right",n-=a,m.left="right"):n+a>w[2]&&"right"===v.left?"left"===m.left?(n-=c,v.left="left",n-=a,m.left="right"):"right"===m.left&&(n-=c,v.left="left",n+=a,m.left="left"):"center"===v.left&&(n+a>w[2]&&"left"===m.left?(n-=a,m.left="right"):n<w[0]&&"right"===m.left&&(n+=a,m.left="left"))),"element"!==p&&"both"!==p||(o<w[1]&&"bottom"===m.top&&(o+=s,m.top="top"),o+s>w[3]&&"top"===m.top&&(o-=s,m.top="bottom")),"element"!==d&&"both"!==d||(n<w[0]&&("right"===m.left?(n+=a,m.left="left"):"center"===m.left&&(n+=a/2,m.left="left")),n+a>w[2]&&("left"===m.left?(n-=a,m.left="right"):"center"===m.left&&(n-=a/2,m.left="right"))),"string"==typeof h?h=h.split(",").map((function(t){return t.trim()})):!0===h&&(h=["top","left","right","bottom"]),h=h||[];var O,C,x=[],E=[];o<w[1]&&(h.indexOf("top")>=0?(o=w[1],x.push("top")):E.push("top")),o+s>w[3]&&(h.indexOf("bottom")>=0?(o=w[3]-s,x.push("bottom")):E.push("bottom")),n<w[0]&&(h.indexOf("left")>=0?(n=w[0],x.push("left")):E.push("left")),n+a>w[2]&&(h.indexOf("right")>=0?(n=w[2]-a,x.push("right")):E.push("right")),x.length&&(void 0,O=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(O),x.forEach((function(t){g.push(O+"-"+t)}))),E.length&&(void 0,C=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(C),E.forEach((function(t){g.push(C+"-"+t)}))),(x.indexOf("left")>=0||x.indexOf("right")>=0)&&(m.left=v.left=!1),(x.indexOf("top")>=0||x.indexOf("bottom")>=0)&&(m.top=v.top=!1),v.top===i.top&&v.left===i.left&&m.top===e.attachment.top&&m.left===e.attachment.left||(e.updateAttachClasses(m,v),e.trigger("update",{attachment:m,targetAttachment:v}))})),C((function(){!1!==e.options.addTargetClasses&&w(e.target,g,d),w(e.element,g,d)})),{top:o,left:n}}});var q,f=(q=o.Utils).getBounds,w=q.updateClasses;return C=q.defer,o.modules.push({position:function(t){var e=this,o=t.top,n=t.left,i=this.cache("element-bounds",(function(){return f(e.element)})),r=i.height,s=i.width,a=this.getTargetBounds(),l=o+r,h=n+s,u=[];o<=a.bottom&&l>=a.top&&["left","right"].forEach((function(t){var e=a[t];e!==n&&e!==h||u.push(t)})),n<=a.right&&h>=a.left&&["top","bottom"].forEach((function(t){var e=a[t];e!==o&&e!==l||u.push(t)}));var c=[],d=[];return c.push(this.getClass("abutted")),["left","top","right","bottom"].forEach((function(t){c.push(e.getClass("abutted")+"-"+t)})),u.length&&d.push(this.getClass("abutted")),u.forEach((function(t){d.push(e.getClass("abutted")+"-"+t)})),C((function(){!1!==e.options.addTargetClasses&&w(e.target,d,c),w(e.element,d,c)})),!0}}),T=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(l){i=!0,r=l}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:o}));var i=void 0,r=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var s=T(n,2);i=s[0],r=s[1],i=parseFloat(i,10),r=parseFloat(r,10)}else i=n.top,r=n.left;return{top:e+=i,left:o+=r}}}}),V},"function"==typeof define&&define.amd?define([],c):"object"==typeof p?p=c():this.Tether=c();var g,v={};g=function(t){"use strict";var e=Function.prototype.bind,o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(l){i=!0,r=l}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=function(t,e,o){for(var n=!0;n;){var i=t,r=e,s=o;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(i);if(null===h)return;t=h,e=r,o=s,n=!0,a=h=void 0}},r=t.Utils,s=r.extend,a=r.addClass,l=r.removeClass,h=r.hasClass,f=r.Evented;function u(t){var e=t.split(" "),n=o(e,2),i=n[0],r=n[1];if(["left","right"].indexOf(i)>=0){var s=[r,i];i=s[0],r=s[1]}return[i,r].join(" ")}function c(t,e){for(var o=void 0,n=[];-1!==(o=t.indexOf(e));)n.push(t.splice(o,1));return n}var d=["click"];"ontouchstart"in document.documentElement&&d.push("touchstart");var p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},g="";for(var v in p)({}).hasOwnProperty.call(p,v)&&void 0!==document.createElement("p").style[v]&&(g=p[v]);var m={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},b={},y=function o(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],p=function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];return new(e.apply(y,[null].concat(o)))};s(p,{createContext:o,drops:[],defaults:{}});var v={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,tetherOptions:{}}};s(p,v,r),s(p.defaults,v.defaults,r.defaults),void 0===b[p.classPrefix]&&(b[p.classPrefix]=[]),p.updateBodyClasses=function(){for(var t=!1,e=b[p.classPrefix],o=e.length,n=0;n<o;++n)if(e[n].isOpened()){t=!0;break}t?a(document.body,p.classPrefix+"-open"):l(document.body,p.classPrefix+"-open")};var y=function(e){function o(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.options=s({},p.defaults,t),this.target=this.options.target,void 0===this.target)throw new Error("Drop Error: You must provide a target.");var e="data-"+p.classPrefix,n=this.target.getAttribute(e);n&&null==this.options.content&&(this.options.content=n);for(var r=["position","openOn"],l=0;l<r.length;++l){var h=this.target.getAttribute(e+"-"+r[l]);h&&null==this.options[r[l]]&&(this.options[r[l]]=h)}this.options.classes&&!1!==this.options.addTargetClasses&&a(this.target,this.options.classes),p.drops.push(this),b[p.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,f),n(o,[{key:"_on",value:function(t,e,o){this._boundEvents.push({element:t,event:e,handler:o}),t.addEventListener(e,o)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),a(this.drop,p.classPrefix),this.options.classes&&a(this.drop,this.options.classes),this.content=document.createElement("div"),a(this.content,p.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};e(),this.on("open",e.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=m[e[0]],e=e.join(" ");var o=[];this.options.constrainToScrollParent?o.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):o.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?o.push({to:"window",attachment:"together"}):o.push({to:"window"});var n={element:this.drop,target:this.target,attachment:u(e),targetAttachment:u(this.options.position),classPrefix:p.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:o,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new t(s({},n,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn)if("always"!==this.options.openOn){var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var o=function(e){t.toggle(e),e.preventDefault()},n=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},i=0;i<d.length;++i){var r=d[i];this._on(this.target,r,o),this._on(document,r,n)}var s=null,a=null,l=function(e){null!==a?clearTimeout(a):s=setTimeout((function(){t.open(e),s=null}),("focus"===e.type?t.options.focusDelay:t.options.hoverOpenDelay)||t.options.openDelay)},h=function(e){null!==s?clearTimeout(s):a=setTimeout((function(){t.close(e),a=null}),("blur"===e.type?t.options.blurDelay:t.options.hoverCloseDelay)||t.options.closeDelay)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",l),this._on(this.drop,"mouseover",l),this._on(this.target,"mouseout",h),this._on(this.drop,"mouseout",h)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",l),this._on(this.drop,"focus",l),this._on(this.target,"blur",h),this._on(this.drop,"blur",h))}else setTimeout(this.open.bind(this))}},{key:"isOpened",value:function(){if(this.drop)return h(this.drop,p.classPrefix+"-open")}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),void 0!==this.tether&&this.tether.enable(),a(this.drop,p.classPrefix+"-open"),a(this.drop,p.classPrefix+"-open-transitionend"),setTimeout((function(){e.drop&&a(e.drop,p.classPrefix+"-after-open")})),void 0!==this.tether&&this.tether.position(),this.trigger("open"),p.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(h(this.drop,p.classPrefix+"-open")||l(this.drop,p.classPrefix+"-open-transitionend"),this.drop.removeEventListener(g,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=!1!==this.options.beforeClose(t,this)),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(l(this.drop,p.classPrefix+"-open"),l(this.drop,p.classPrefix+"-after-open"),this.drop.addEventListener(g,this.transitionEndHandler),this.trigger("close"),void 0!==this.tether&&this.tether.disable(),p.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&void 0!==this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),void 0!==this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],o=e.element,n=e.event,i=e.handler;o.removeEventListener(n,i)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,c(b[p.classPrefix],this),c(p.drops,this)}}]),o}();return p}();return document.addEventListener("DOMContentLoaded",(function(){y.updateBodyClasses()})),y},"function"==typeof define&&define.amd?define(["tether"],g):"object"==typeof v?v=g(p):this.Drop=g(this.Tether);var m=v.createContext({classPrefix:"ezra"});function b(e,n){var i=new m({classes:"ezra-theme-arrows",target:e,content:document.createTextNode(o.loading+"..."+n.refText),openOn:"hover",constrainToScrollParent:!1,tetherOptions:{constraints:[{to:"window",attachment:"together",pin:["left","right"]}]}});i.on("open",(function(){var e=window.getComputedStyle(this.target).fontSize;this.content.style.fontSize=e,t.getVerses(n,(function(t){var e=t.data||o[t.errCode];i.content.innerText=e,i.position()}))}))}function y(t,e){var o=[];for(e.sort((function(t,e){return t.pos-e.pos}));e.length>0;){var n=e.shift(),i=O(t,n.text);i[0]&&o.push(document.createTextNode(i[0])),o.push(w(n)),t=i[1]}return t&&o.push(document.createTextNode(t)),o}function w(t){var e=document.createElement("a");return e.innerText=t.text,e.dataset.ezraRef=JSON.stringify(t),e}function O(t,e){var o=t.split(e);return[o.shift(),o.join(e)]}function C(t,e){for(var o=e.length-1;o>0;o--)t.parentNode.insertBefore(e[o],t.nextSibling);t.parentNode.replaceChild(e[0],t)}(window.ezraLinkifier=window.ezraLinkifier||{}).linkify=function(t){for(var e=new d,o=function(t){var e=[];return function t(o){if(3==o.nodeType)e.push(o);else for(var n=0;n<o.childNodes.length;n++)t(o.childNodes[n])}(t),e}(t),n=0;n<o.length;n++)if("A"!==o[n].parentNode.nodeName){var i=e.detect(o[n].nodeValue);if(i.length>0){var r=y(o[n].nodeValue,i);C(o[n],r)}}var s=t.querySelectorAll("a[data-ezra-ref]");for(n=0;n<s.length;n++){var a=s[n];b(a,JSON.parse(a.dataset.ezraRef))}}}();